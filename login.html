<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Join-Login</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>

    <link rel="icon" type="image/x-icon" href="./assets/img/logo_white.svg">

    <link rel="stylesheet" href="./css/general.css">
    <link rel="stylesheet" href="./css/login.css">
    <link rel="manifest" href="manifest.json">

    <!-- defer for those scripts that need to wait for DOM -->
    <script src="./js/classes/class.users.js"></script>
    <script src="./js/login/login-navigation.js"></script>
    <script src="./js/login/login-users.js"></script>
    <script defer src="./js/login/signup-validation.js"></script>
    <script defer src="./js/login/forgotpw-validation.js"></script>

    <!-- Alert message scripts and CSS -->
    <script defer src="./js/dashboard/alert-message.js"></script>
    <link rel="stylesheet" href="./css/alert.css">

</head>

<body onload="init()">

    <div class="background">

        <!-- Logo oben links -->
        <img class="logo" src="./assets/img/logo_black.svg">

        <!-- Login Mainpage -->
        <main class="" id="login">

            <!-- Container in der Mitte -->
            <div class="flex-column flex-center gap-10 card padding-20 margin-bottom-20" id="loginForm">

                <!-- Title -->
                <div class="flex-column flex-center gap-10 margin-bottom-20">
                    <span class="title-medium color-primary">Login</span>
                    <div class="blueline"></div>
                </div>

                <!-- Input Felder-->
                <div class="flex-column flex-center gap-10 width-100">
                    <input class="input-field width-100 border-box mail-icon" type="text" placeholder="Name"
                        id="loginEmail">
                    <div class="error" id="emailError"></div>
                    <input class="input-field width-100 border-box pw-icon" type="password" placeholder="Password"
                        id="loginPw">
                    <div class="error" id="passwordError"></div>
                </div>

                <!-- Optionen forgot/reset -->
                <div class="flex-column flex-center gap-10 width-100 margin-bottom-20">
                    <div class="flex-row flex-center gap-10 scale">
                        <input class="input-field cursor-pointer" type="checkbox" id="rememberUser">
                        <span class="text-small">Remember me</span>
                    </div>
                    <a class="text-small cursor-pointer text-blue scale" onclick="openPage('forgotpw')">Forgot my
                        password</a>
                </div>

                <!-- Buttons unten -->
                <div class="flex-row flex-center gap-25">
                    <div class="btn-primary cursor-pointer" onclick="loginWithUsernameAndPassword()">Login</div>
                    <div class="btn-secondary cursor-pointer" onclick="loginWithGuestAccount()">Guest Login</div>
                </div>
            </div>

            <!-- Signup Button -->
            <div class="flex-row flex-center gap-25">
                <span class="text-normal">New Account?</span>
                <div class="btn-primary cursor-pointer" onclick="openPage('signup')">Sign up</div>
            </div>
        </main>

        <!-- Forgotpw Page -->
        <main class="d-none" id="forgotpw">
            <div class="flex-column flex-center gap-25 card padding-20">

                <div class="bluearrow">
                    <img class="icon-very-small scale cursor-pointer" src="./assets/img/bluearrow.svg"
                        onclick="openPage('login')">
                </div>

                <div class="flex-column flex-center gap-10">
                    <span class="title-medium color-primary max-width-200 text-center">Forgot your Password?</span>
                    <div class="blueline"></div>
                </div>

                <span class="text-normal max-width-200 text-center">Don't worry! We will send you an email with the
                    instructions to reset
                    your
                    password.
                </span>
                <div>
                    <input class="input-field mail-icon border-box" type="text" placeholder="Email" id="forgotpwEmail">
                    <div class="error"></div>
                </div>
                <div class="btn-primary cursor-pointer" onclick="validateEmail()">Send email</div>
            </div>

        </main>

        <!-- Signup Page -->
        <main class="d-none" id="signup">
            <!-- Center Box -->
            <div class="flex-column flex-center card gap-10 padding-20 border-box">

                <div class="bluearrow">
                    <img class="icon-very-small scale cursor-pointer" src="./assets/img/bluearrow.svg"
                        onclick="openPage('login')">
                </div>

                <!-- Title -->
                <div class="flex-column flex-center gap-10 margin-bottom-20">
                    <span class="title-medium color-primary">Sign up</span>
                    <div class="blueline"></div>
                </div>

                <!-- Input Fields -->
                <div class="flex-column flex-center gap-25 margin-bottom-20" id="signupForm">

                    <div class="flex-column flex-center">
                        <input class="input-field name-icon border-box" type="text" placeholder="Name" id="signupName">
                        <div class="error" id="signupNameError"></div>
                    </div>

                    <div class="flex-column flex-center">
                        <input class="input-field mail-icon border-box" type="text" placeholder="E-Mail" id="signupEmail">
                        <div class="error" id="signupEmailError"></div>
                    </div>

                    <div class="flex-column flex-center">
                        <input class="input-field pw-icon border-box" type="password" placeholder="Password" id="signupPw">
                        <div class="error" id="signupPwError"></div>
                    </div>

                    <div class="flex-column flex-center">
                        <input class="input-field pw-icon border-box" type="password" placeholder="Confirm Password"
                            id="signupConfirm">
                        <div class="error" id="signupPwError"></div>
                    </div>

                </div>

                <div class="btn-primary cursor-pointer" onclick="">Sign up</div>

            </div>
        </main>
    </div>

    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js').then(
                registration => {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }
            ).catch(
                error => {
                    console.log('ServiceWorker registration failed: ', error);
                }
            );
        }
    </script>

</body>


</html>
<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Join-Login</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>

    <link rel="icon" type="image/x-icon" href="./assets/img/logo_white.svg">

    <link rel="stylesheet" href="./css/login.css">
    <link rel="manifest" href="manifest.json">


    <!-- defer for those scripts that need to wait for DOM -->
    <script src="./js/classes/class.users.js"></script>
    <script src="./js/login/login-navigation.js"></script>
    <script src="./js/login/login-users.js"></script>
    <script defer src="./js/login/signup-validation.js"></script>
    <script defer src="./js/login/forgotpw-validation.js"></script>
    <script defer src="./js/login/resetpw-validation.js"></script>

</head>

<body onload="init()">

    <div class="background">

        <!-- Logo oben links -->
        <img class="logo" src="./assets/img/logo_black.svg">

        <!-- Login Mainpage -->
        <main class="" id="login">
            <!-- Signup oben rechts -->
            <div class="login-signup-wrap">
                <span class="login-signup-text">Not a Join user?</span>
                <button class="login-signup-button" onclick="openPage('signup')">Sign up</button>
            </div>

            <!-- Container in der Mitte -->
            <div class="login-center-container" id="loginForm">

                <!-- Title -->
                <div class="login-title-wrap">
                    <span class="login-title">Log in</span>
                    <vector class="login-blueline"></vector>
                </div>

                <!-- Input Felder-->
                <div class="login-input-wrap">
                    <div class="login-input-border">
                        <input class="login-input mail-icon" type="text" placeholder="Email or Name" id="loginEmail">
                    </div>
                    <div class="error" id="emailError"></div>
                    <div class="login-input-border">
                        <input class="login-input pw-icon" type="password" placeholder="Password" id="loginPw">
                    </div>
                    <div class="error" id="passwordError"></div>
                </div>

                <!-- Optionen forgot/reset -->
                <div class="login-options-wrap">
                    <div class="login-options-left">
                        <input class="login-checkbox" type="checkbox" id="rememberUser">
                        <span class="login-checkbox-text">Remember me</span>
                    </div>
                    <a class="login-forgotpw-link" onclick="openPage('forgotpw')">Forgot my password</a>
                </div>

                <!-- Buttons unten -->
                <div class="login-buttons-wrap">
                    <button class="login-login-button" onclick="loginWithUsernameAndPassword()">Log in</button>
                    <div class="login-guestlogin-button" onclick="loginWithGuestAccount()">Guest Log in</div>
                </div>
            </div>
        </main>

        <!-- Forgotpw Page -->
        <main class="d-none" id="forgotpw">
            <form class="forgotpw-container" id="forgotpwForm">

                <div class="forgotpw-bluearrow" onclick="openPage('login')">
                    <img src="./assets/img/bluearrow.svg">
                </div>

                <span class="forgotpw-title">I forgot my password</span>

                <div class="forgotpw-blueline"></div>
                <span class="forgotpw-text">Don't worry! We will send you an email with the instructions to reset your
                    password.
                </span>
                <div class="login-input-border">
                    <input class="login-input mail-icon" type="text" placeholder="Email" id="forgotpwEmail">
                    <div class="error"></div>
                </div>
                <button class="forgotpw-button" type="submit">Send me the mail</button>
            </form>

            <!-- email confirmation msg -->
            <div class="forgotpw-confirmation-outer" id="messageMail">
                <div class="forgotpw-confirmation-border">
                    <img class="forgotpw-confirmation-icon" src="./assets/img/sent.svg">
                    <span class="forgotpw-confirmation-text">An E-mail has been sent to you</span>
                </div>
            </div>

        </main>

        <!-- Resetpw Page -->
        <main class="d-none" id="resetpw">
            <!-- Container Middle -->
            <div class="resetpw-container">

                <div class="resetpw-arrow-wrap" onclick="openPage('login')">
                    <img class="resetpw-arrow-img" src="./assets/img/bluearrow.svg">
                </div>

                <!-- Title container -->
                <div class="resetpw-title-container">
                    <span class="resetpw-title">Reset your password</span>
                    <div class="resetpw-blueline"></div>
                </div>

                <span class="resetpw-text">Change your account password</span>

                <!-- Input container -->
                <form class="resetpw-input-wrap" id="resetpwForm">
                    <div class="login-input-border">
                        <input class="login-input" type="password" placeholder="New password" id="resetpwP1">
                        <div class="error"></div>
                    </div>

                    <div class="login-input-border">
                        <input class="login-input" type="password" placeholder="Confirm password" id="resetpwP2">
                        <div class="error"></div>
                    </div>

                    <!--Continue button -->
                    <div class="resetpw-btn-wrap">
                        <button class="resetpw-btn" type="submit">Continue</button>
                    </div>
                </form>



            </div>

            <!-- Confirmation msg for resetpw -->
            <div class="resetpw-msg-outer" id="messageReset">
                <div class="resetpw-msg-border">
                    <span class="resetpw-msg-text">You reset your password</span>
                </div>
            </div>

        </main>

        <!-- Signup Page -->
        <main class="d-none" id="signup">
            <!-- Center Box -->
            <div class="signup-container">

                <div class="signup-bluearrow">
                    <img class="signup-bluearrow-img" src="./assets/img/bluearrow.svg" alt="bluearrow"
                        onclick="openPage('login')">
                </div>

                <!-- Title -->
                <div class="signup-title-wrap">
                    <span class="signup-title">Sign up</span>
                    <div class="signup-blueline"></div>
                </div>

                <!-- Input Fields -->
                <form class="signup-inputs-wrap" id="signupForm">

                    <div class="login-input-border">
                        <input class="login-input name-icon" type="text" placeholder="Name" id="signupName">
                        <div class="error"></div>
                    </div>
                    <div class="login-input-border">
                        <input class="login-input pw-icon" type="text" placeholder="E-Mail" id="signupEmail">
                        <div class="error"></div>
                    </div>
                    <div class="login-input-border">
                        <input class="login-input mail-icon" type="password" placeholder="Password" id="signupPw">
                        <div class="error"></div>
                    </div>

                    <div class="signup-button-wrap">
                        <button class="signup-button" type="submit">Sign up</button>
                    </div>
                </form>

            </div>
        </main>
    </div>

    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js').then(
                registration => {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }
            ).catch(
                error => {
                    console.log('ServiceWorker registration failed: ', error);
                }
            );
        }
    </script>

</body>


</html>
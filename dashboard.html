<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JOIN</title>
    <link rel="icon" type="image/x-icon" href="./assets/img/logo_white.svg">

    <script src="./js/classes/class.task.js"></script>
    <script src="./js/classes/class.categories.js"></script>
    <script src="./js/classes/class.contact.js"></script>
    <script src="./js/classes/class.TaskTemplates.js"></script>
    <script src="./js/classes/class.TaskDetailTemplates.js"></script>
    <script src="./js/classes/class.ContactTemplates.js"></script>
    <script src="./js/dashboard/2_summary.js"></script>
    <script src="./js/dashboard/1_main.js"></script>
    <script defer src="./js/dashboard/3_board.js"></script>
    <script defer src="./js/dashboard/4_addtask.js"></script>
    <script defer src="./js/dashboard/4.1_addtask_validation.js"></script>
    <script defer src="./js/dashboard/4.2_edittask.js"></script>
    <script defer src="./js/dashboard/5_contact.js"></script>
    <script defer src="./js/dashboard/menu-navigation.js"></script>
    <script defer src="./js/dashboard/drag&drop.js"></script>

    <link rel="stylesheet" href="./css/dashboard.css">
    <link rel="manifest" href="manifest.json">
</head>

<body onload="init();">

    <div class="background"></div>

    <!-- Task creation confirmation msg -->
    <div class="addtask-confirmation-outer" id="messageTask">
        <div class="addtask-confirmation-border">
            <img src="./assets/img/check.svg">
            <span class="addtask-confirmation-text">Task added to board</span>
        </div>
    </div>

    <!-- All Overlays Are Here -->
    <div class="overlay-background d-none" id="overlayBackground" onclick="closeOverlay()">

        <!-- Card Overlay -->
        <div class="board-taskoverlay-container d-none" id="overlayTask" onclick="stopPropagation(event)">
        </div>

        <!-- Add Task Overlay -->
        <form class="addtask-overlay-container d-none" id="addtaskOverlay" onclick="stopPropagation(event)">
            <!-- Content left side -->
            <div class="addtask-leftcontainer">
                <div class="addtask-leftcontainer-title">
                    <span class="addtask-leftcontainer-titletext">Title</span>
                    <input class="addtask-leftcontainer-titlefield" type="text" id="addtaskOverlayTitle"
                        placeholder="Enter a title">
                    <div class="error"></div>
                </div>

                <div class="addtask-leftcontainer-description">
                    <span class="addtask-leftcontainer-descriptiontext">Description</span>
                    <textarea class="addtask-leftcontainer-descriptionfield" cols="1" rows="2"
                        id="addtaskOverlayDescription" placeholder="Enter a description"></textarea>
                    <div class="error"></div>
                </div>

                <div class="addtask-leftcontainer-category">
                    <span class="addtask-leftcontainer-categorytext">Category</span>
                    <div class="addtask-leftcontainer-categoryfield" id="addtaskOverlayCategory"
                        onclick="expandCategories('overlay')">Select task category
                    </div>
                </div>

                <div class="addtask-leftcontainer-assigned">
                    <span class="addtask-leftcontainer-assignedtext">Assigned to</span>
                    <div class="addtask-leftcontainer-assignedfield" id="addtaskOverlayAssigned"
                        onclick="expandAssigned('overlay')">Select contacts to assign
                    </div>
                </div>
                <div class="addtask-leftcontainer-assigned-display" id="displayOverlayAssigned"></div>
            </div>

            <div class="addtask-line"></div>

            <!-- Content right side -->
            <div class="addtask-rightcontainer">
                <div class="addtask-close-btn" onclick="closeOverlay()"></div>
                <div class="addtask-rightcontainer-date">
                    <span class="addtask-rightcontainer-datetext">Due date</span>
                    <input class="addtask-rightcontainer-datefield" type="date" id="addtaskOverlayDate">
                    <div class="error"></div>
                </div>

                <div class="addtask-rightcontainer-prio">
                    <span class="addtask-rightcontainer-priotext">Prio</span>
                    <div class="addtask-rightcontainer-priobtns" id="addtaskOverlayPrio">
                        <div class="addtask-rightcontainer-priobtns-outline" onclick="setPriority('overlay', 'urgent')">
                            <span class="addtask-rightcontainer-priobtns-text">Urgent</span>
                            <img class="addtast-rightcontainer-priobtns-icon" src="./assets/img/priohigh.svg">
                        </div>
                        <div class="addtask-rightcontainer-priobtns-outline" onclick="setPriority('overlay', 'medium')">
                            <span class="addtask-rightcontainer-priobtns-text">Medium</span>
                            <img class="addtast-rightcontainer-priobtns-icon" src="./assets/img/priomedium.svg">
                        </div>
                        <div class="addtask-rightcontainer-priobtns-outline" onclick="setPriority('overlay', 'low')">
                            <span class="addtask-rightcontainer-priobtns-text">Low</span>
                            <img class="addtast-rightcontainer-priobtns-icon" src="./assets/img/priolow.svg">
                        </div>
                    </div>
                </div>

                <div class="addtask-rightcontainer-subtask">
                    <span class="addtask-rightcontainer-subtasktext">Subtask</span>
                    <div class="addtask-rightcontainer-subtaskborder">
                        <input class="addtask-rightcontainer-subtaskfield" type="text" placeholder="Add new subtask"
                            id="addtaskOverlaySub">
                        <img class="addtask-rightcontainer-subtask-icon" src="./assets/img/plus.svg"
                            onclick="addSubtask('overlay')">
                    </div>
                    <div class="gap" id="addtaskOverlaySubbox">
                    </div>
                </div>

                <!-- Buttons bottom right -->
                <div class="addtask-button-container">
                    <div class="addtask-button-inner">
                        <div class="addtask-button-clear" onclick="clearOverlay()" id="taskClearButton">
                            Clear
                            <div class="addtask-button-clearicon"></div>
                        </div>
                        <button class="addtask-button-createtask" type="submit" id="overlaySubmit" value="Add task">
                            Add Task
                            <div class="addtask-button-createicon"></div>
                        </button>
                    </div>
                </div>
            </div>
        </form>

        <!-- Add Contact Overlay-->
        <div class="addcontact-content d-none" id="addcontactOverlay" onclick="stopPropagation(event)">
            <img class="addcontact-task-close" src="./assets/img/clear.svg" onclick="closeOverlay()">
            <div class="addcontact-title-container">
                <img class="addcontact-logo" src="./assets/img/logo_white.svg" alt="logo">
                <div class="addcontact-title">Add contact</div>
                <div class="addcontact-subtitle">Tasks are better with a team</div>
                <img src="./assets/img/horizontal_blue_line.svg">
            </div>
            <div class="addcontact-form">
                <div class="addcontact-user-badge">
                    <img src="./assets/img/user_guest.svg">
                </div>
                <form class="addcontact-form-right" id="formAddcontact">
                    <div class="addcontact-form-container">
                        <input class="addcontact-input-profile" type="text" id="addcontactInputName" placeholder="Name">
                        <div class="error"></div>
                    </div>
                    <div class="addcontact-form-container">
                        <input class="addcontact-input-email" type="text" id="addcontactInputEmail" placeholder="Email">
                        <div class="error"></div>
                    </div>
                    <div class="addcontact-form-container">
                        <input class="addcontact-input-phone" type="text" id="addcontactInputPhone" placeholder="Phone">
                        <div class="error"></div>
                    </div>
                    <div class="addcontact-submit-btns">
                        <input class="addcontact-clear-btn" type="button" value="Clear"
                            onclick="clearNewcontactInputfields()">
                        <input class="addcontact-create-btn" type="submit" value="Create contact">
                    </div>
                </form>
            </div>
        </div>

        <!-- Edit Contact Overlay -->
        <div class="addcontact-content d-none" id="editcontactOverlay" onclick="stopPropagation(event)">

        </div>

    </div>

    <!-- Top Navigation Bar -->
    <header class="topnav">
        <div class="topnav-logo"><img src="./assets/img/logo_black.svg"></div>
        <span class="topnav-text">Kanban Project Management Tool</span>

        <div class="topnav-right">
            <img class="topnav-help" src="./assets/img/help.svg" onclick="openPage('help')">

            <img class="topnav-profile" src="./assets/img/profilepicture.png" onclick="openSignout()">
            <div class="topnav-signout d-none" id="signout">
                <span onclick="logout()">Sign out</span>
                <span onclick="openPage('help')">Help</span>
                <span onclick="openPage('legal')">Legal Info</span>
            </div>
        </div>
    </header>

    <!-- Side Navigation Bar -->
    <div class="sidebar">
        <div class="sidebar-logo"><img src="./assets/img/logo_white.svg"></div>
        <div class="sidebar-menu-container">
            <div class="sidebar-menu-option-dark" id="menu-summary" onclick="openPage('summary')">
                <div><img src="./assets/img/summary_icon_bright.svg"></div>
                <p class="sidebar-menu-text">Summary</p>
            </div>
            <div class="sidebar-menu-option-light" id="menu-board" onclick="openPage('board')">
                <div><img src="./assets/img/board_icon.svg"></div>
                <p class="sidebar-menu-text">Board</p>
            </div>
            <div class="sidebar-menu-option-light" id="menu-addtask" onclick="openPage('addtask')">
                <div><img src="./assets/img/addTask_icon.svg"></div>
                <p class="sidebar-menu-text">Add Task</p>
            </div>
            <div class="sidebar-menu-option-light" id="menu-contacts" onclick="openPage('contacts')">
                <div><img src="./assets/img/contacts_icon.svg"></div>
                <p class="sidebar-menu-text">Contacts</p>
            </div>
            <div class="sidebar-menu-option-light margin-top" id="menu-legal" onclick="openPage('legal')">
                <div><img src="./assets/img/info_icon.svg"></div>
                <p class="sidebar-menu-text">Legal notice</p>
            </div>
        </div>
    </div>

    <!-- Content Container for summary, board, addtask, contacts -->
    <div class="container">

        <!-- SUMMARY -->
        <main class="summary" id="summary">

            <!-- Title on top -->
            <div class="summary-title-wrap">
                <span class="summary-title">Summary</span>
                <div class="summary-title-line"></div>
                <span class="summary-title-text">Everything in a nutshell!</span>
            </div>

            <!-- Greeting on the right -->
            <div class="summary-greeting-wrap">
                <span class="summary-greeting">Welcome aboard,</span>
                <span class="summary-username" id="username">Guest</span>
            </div>

            <!-- Center content -->
            <div class="summary-tile-container">
                <!-- TOP part of center content -->
                <div class="summary-tile-topwrap">
                    <div class="summary-tile" onclick="openPage('board')">
                        <div class="summary-tile-inner">
                            <span class="summary-tile-counter" id="tasksCounter"></span>
                            <span class="summary-tile-text">Tasks on Board</span>
                        </div>
                    </div>
                    <div class="summary-tile" onclick="openPage('board')">
                        <div class="summary-tile-inner">
                            <span class="summary-tile-counter" id="progressCounter"></span>
                            <span class="summary-tile-text">Tasks in Progress</span>
                        </div>
                    </div>
                    <div class="summary-tile" onclick="openPage('board')">
                        <div class="summary-tile-inner">
                            <span class="summary-tile-counter" id="feedbackCounter"></span>
                            <span class="summary-tile-text">Awaiting Feedback</span>
                        </div>
                    </div>
                </div>

                <!-- MIDDLE part of center content -->
                <div class="summary-tile-middlewrap" onclick="openPage('board')">

                    <!-- MIDDLE LEFT part -->
                    <div class="summary-tile-middle-left">
                        <div class="summary-tile-middle-left-icon-outer">
                            <img class="summary-tile-middle-left-icon" src="./assets/img/urgent.svg">
                        </div>
                        <div class="summary-tile-middle-left-counter-outer">
                            <span class="summary-tile-middle-left-counter" id="urgentCounter"></span>
                            <span class="summary-tile-middle-text">Urgent</span>
                        </div>
                    </div>

                    <!-- MIDDLE CENTER line-->
                    <div class="summary-tile-middle-line"></div>

                    <!-- MIDDLE RIGHT part -->
                    <div class="summary-tile-middle-right">
                        <span class="summary-tile-middle-right-date" id="urgentDate"></span>
                        <span class="summary-tile-middle-text">Upcoming deadline</span>
                    </div>
                </div>

                <!-- BOTTOM part of center content -->
                <div class="summary-tile-bottomwrap">

                    <!-- TO DO part left -->
                    <div class="summary-bottom-tile" onclick="openPage('board')">
                        <div class="summary-bottom-tile-iconwrap">
                            <div class="summary-bottom-todo-icon"></div>
                        </div>
                        <div class="summary-bottom-counter-outer">
                            <span class="summary-bottom-counter" id="todoCounter"></span>
                            <span class="summary-bottom-text">Todo</span>
                        </div>
                    </div>

                    <!-- DONE part right -->
                    <div class="summary-bottom-tile" onclick="openPage('board')">
                        <div class="summary-bottom-tile-iconwrap">
                            <div class="summary-bottom-done-icon"></div>
                        </div>
                        <div class="summary-bottom-counter-outer">
                            <span class="summary-bottom-counter" id="doneCounter"></span>
                            <span class="summary-bottom-text">Done</span>
                        </div>
                    </div>

                </div>
            </div>
        </main>

        <!-- BOARD -->
        <main class="board d-none" id="board">

            <!-- Title on top -->
            <div class="board-title-wrap">
                <!-- Title -->
                <div class="board-title-outer">
                    <span class="board-title">Board</span>
                </div>

                <div class="board-topright">
                    <!-- Searchbar -->
                    <div class="board-searchbar-border">
                        <div class="board-searchbar-outer">
                            <div class="board-searchbar-inner">
                                <input class="board-searchbar-text" id="searchField" type="search"
                                    placeholder="Find Task" onkeyup="filterCards()">
                            </div>
                            <div class="board-searchbar-icon-wrap">
                                <div class="board-searchbar-verticalline"></div>
                                <img class="board-searchbar-icon" src="./assets/img/search.svg">
                            </div>
                        </div>
                    </div>

                    <!-- addTask Button -->
                    <div class="board-addtask-button" onclick="openAddtaskOverlay('To do')">
                        <span class="board-addtask-button-text">Add task</span>
                        <div class="board-addtask-button-icon-outer">
                            <div class="board-addtask-button-icon-inner">+
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Content -->
            <div class="board-container">

                <!-- TODO column -->
                <div class="board-column">
                    <div class="board-column-top tooltip">
                        <img class="board-column-icon" src="./assets/img/addbtn.svg"
                            onclick="openAddtaskOverlay('To do')">
                        <span class="board-column-title">Todo</span>
                    </div>

                    <div class="canvas" id="todo-canvas"></div>
                </div>

                <!-- PROGRESS column -->
                <div class="board-column">
                    <div class="board-column-top tooltip">
                        <img class="board-column-icon" src="./assets/img/addbtn.svg"
                            onclick="openAddtaskOverlay('In Progress')">
                        <span class="board-column-title">In Progress</span>
                    </div>

                    <div class="canvas" id="progress-canvas"></div>
                </div>

                <!-- FEEDBACK column -->
                <div class="board-column">
                    <div class="board-column-top tooltip">
                        <img class="board-column-icon" src="./assets/img/addbtn.svg"
                            onclick="openAddtaskOverlay('Awaiting Feedback')">
                        <span class="board-column-title">Awaiting Feedback</span>
                    </div>

                    <div class="canvas" id="feedback-canvas"></div>
                </div>


                <!-- DONE column -->
                <div class="board-column">
                    <div class="board-column-top tooltip">
                        <img class="board-column-icon" src="./assets/img/addbtn.svg"
                            onclick="openAddtaskOverlay('Done')">
                        <span class="board-column-title">Done</span>
                    </div>

                    <div class="canvas" id="done-canvas"></div>
                </div>

            </div>
        </main>

        <!-- ADDTASK -->
        <main class="addtask d-none" id="addtask">

            <!-- Title -->
            <div class="addtask-title-wrap">
                <span class="addtask-title">Add Task</span>
            </div>

            <form class="addtask-container" id="addtaskMenu" onclick="stopPropagation(event)">
                <!-- Content left side -->
                <div class="addtask-leftcontainer">
                    <div class="addtask-leftcontainer-title">
                        <span class="addtask-leftcontainer-titletext">Title</span>
                        <input class="addtask-leftcontainer-titlefield" type="text" id="addtaskMenuTitle"
                            placeholder="Enter a title">
                        <div class="error"></div>
                    </div>

                    <div class="addtask-leftcontainer-description">
                        <span class="addtask-leftcontainer-descriptiontext">Description</span>
                        <textarea class="addtask-leftcontainer-descriptionfield" cols="1" rows="2"
                            id="addtaskMenuDescription" placeholder="Enter a description"></textarea>
                        <div class="error"></div>
                    </div>

                    <div class="addtask-leftcontainer-category">
                        <span class="addtask-leftcontainer-categorytext">Category</span>
                        <div class="addtask-leftcontainer-categoryfield" id="addtaskMenuCategory"
                            onclick="expandCategories('menu')">Select task category
                        </div>
                    </div>

                    <div class="addtask-leftcontainer-assigned">
                        <span class="addtask-leftcontainer-assignedtext">Assigned to</span>
                        <div class="addtask-leftcontainer-assignedfield" id="addtaskMenuAssigned"
                            onclick="expandAssigned('menu')">Select contacts to assign
                        </div>
                    </div>
                    <div class="addtask-leftcontainer-assigned-display" id="displayMenuAssigned"></div>
                </div>

                <div class="addtask-line"></div>

                <!-- Content right side -->
                <div class="addtask-rightcontainer">
                    <div class="addtask-rightcontainer-date">
                        <span class="addtask-rightcontainer-datetext">Due date</span>
                        <input class="addtask-rightcontainer-datefield" type="date" id="addtaskMenuDate">
                        <div class="error"></div>
                    </div>

                    <div class="addtask-rightcontainer-prio">
                        <span class="addtask-rightcontainer-priotext">Prio</span>
                        <div class="addtask-rightcontainer-priobtns" id="addtaskMenuPrio">
                            <div class="addtask-rightcontainer-priobtns-outline"
                                onclick="setPriority('menu', 'urgent')">
                                <span class="addtask-rightcontainer-priobtns-text">Urgent</span>
                                <img class="addtast-rightcontainer-priobtns-icon" src="./assets/img/priohigh.svg">
                            </div>
                            <div class="addtask-rightcontainer-priobtns-outline"
                                onclick="setPriority('menu', 'medium')">
                                <span class="addtask-rightcontainer-priobtns-text">Medium</span>
                                <img class="addtast-rightcontainer-priobtns-icon" src="./assets/img/priomedium.svg">
                            </div>
                            <div class="addtask-rightcontainer-priobtns-outline" onclick="setPriority('menu', 'low')">
                                <span class="addtask-rightcontainer-priobtns-text">Low</span>
                                <img class="addtast-rightcontainer-priobtns-icon" src="./assets/img/priolow.svg">
                            </div>
                        </div>
                    </div>

                    <div class="addtask-rightcontainer-subtask">
                        <span class="addtask-rightcontainer-subtasktext">Subtask</span>
                        <div class="addtask-rightcontainer-subtaskborder">
                            <input class="addtask-rightcontainer-subtaskfield" type="text" placeholder="Add new subtask"
                                id="addtaskMenuSub">
                            <img class="addtask-rightcontainer-subtask-icon" src="./assets/img/plus.svg"
                                onclick="addSubtask('menu')">
                        </div>
                        <div class="gap" id="addtaskMenuSubbox">
                        </div>
                    </div>

                    <!-- Buttons bottom right -->
                    <div class="addtask-button-container">
                        <div class="addtask-button-inner">
                            <div class="addtask-button-clear" onclick="clearAddtaskMenu()">
                                Clear
                                <div class="addtask-button-clearicon"></div>
                            </div>
                            <button class="addtask-button-createtask" type="submit" id="overlaySubmit" value="Add task">
                                Add Task
                                <div class="addtask-button-createicon"></div>
                            </button>
                        </div>
                    </div>
                </div>
            </form>
        </main>

        <!-- CONTACTS -->
        <main class="contacts d-none" id="contacts">

            <!-- Title -->
            <div class="contact-title-container">
                <span class="contact-title">Contacts</span>
                <div class="contact-title-line"></div>
                <span class="contact-title-text">Better with a team</span>
            </div>

            <!-- Content -->
            <div class="contact-container">
                <div class="contact-container-inner" id="contactList">


                </div>
            </div>

            <div class="contact-canvas d-none" id="contactCanvas">

            </div>

            <div class="contact-addcontact-button" onclick="openAddcontactOverlay('To do')">
                <span class="contact-addcontact-button-text">New contact</span>
                <img class="contact-addcontact-button-icon" src="./assets/img/addcontact.svg">
            </div>

        </main>

        <!-- LEGAL -->
        <main class="legal d-none" id="legal">

            <!-- Content -->
            <div class="legal-title">
                <span class="legal-title-span">Legal Notice</span>
            </div>

            <div class="legal-join-inner">
                <div class="legal-blackArrow-wrap">
                    <img src="./assets/img/blackarrow.svg" onclick="openPage('summary')">
                </div>

                <span class="legal-responsible-title">Legally responsible contact person </span>
                <span class="legal-responsible-txt">
                    Frederic Mathias Rieg<br>
                    Mahatma Gandi Cd. 79<br>
                    Appartment 8<br>
                    06880 Ankara<br>
                    Telephone: +90 534 887 41 05<br>
                    Email: fredericrieg@protonmail.com<br>
                    Website: https://www.frederic-rieg.de<br>
                    Bei redaktionellen Inhalten verantwortlich nach ยง 55 Abs.2 RStV<br>
                    Frederic Rieg<br>
                </span>

                <span class="legal-content-title">Concerning external links and user-created contents</span>
                <span class="legal-content-text">
                    The above mentioned persons are not liable for any offending user-created content that third parties
                    post here. This web-app is being checked for offending contents on a regular basis. If offending
                    contents are identfied, they will be removed.
                </span>

            </div>

        </main>

        <!-- HELP -->
        <main class="help d-none" id="help">

            <!-- Content -->
            <div class="help-title">
                <span class="help-title-span">Help</span>
            </div>

            <div class="help-join-inner">
                <div class="help-blackArrow-wrap">
                    <img src="./assets/img/blackarrow.svg" onclick="openPage('summary')">
                </div>

                <span class="help-whatIsJoin-title">
                    What is Join?
                </span>

                <span class="help-whatIsJoin-txt">
                    JOIN is a team-oriented canban board that helps you keep track of your and your team's tasks.
                    This app is divided into four sections: summary, board, add task and contacts. The summary provides
                    you an overview of how many tasks are on board, in progress, awaiting feedback, to-do, done as well
                    as
                    the upcoming deadlines for urgent tasks. The board contains the actual canban board with tasks
                    attached
                    like sticky notes. Here you can view, drag and drop, create new, edit and search tasks. In the add
                    task
                    section, you can add new tasks without using the board-overlay. Finally, the contacts page gives you
                    an overview of existing contacts. Here you can add new and edit existing contacts.
                </span>

                <span class="help-howToUseIt-title">How to use it</span>

                <div class="help-howToUseIt-wrap">

                    <div class="help-howToUseIt-inner">

                        <span class="help-howToUseIt-number">1.</span>

                        <span class="help-howToUseIt-text">Create a new task via the board-overlay by clicking on
                            "addtask" or the
                            + symbol on either of the board-categories headlines.
                        </span>

                    </div>

                    <div class="help-howToUseIt-inner">

                        <span class="help-howToUseIt-number">2.</span>

                        <span class="help-howToUseIt-text">Type in at least a title, date and description text in order
                            to create a new task. All other
                            information are not mandatory.
                        </span>

                    </div>

                    <div class="help-howToUseIt-inner">

                        <span class="help-howToUseIt-number">3.</span>

                        <span class="help-howToUseIt-text">If you want to edit a task, just click on the desired
                            task-card and click on the edit-button
                            that shows on the task-detail overlay. As with creating a new task, title, description and
                            date are mandatory fields.
                        </span>
                    </div>
                </div>
            </div>
        </main>

    </div>

    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('service-worker.js').then(
                registration => {
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                }
            ).catch(
                error => {
                    console.log('ServiceWorker registration failed: ', error);
                }
            );
        }
    </script>

</body>

</html>